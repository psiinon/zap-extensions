<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<TITLE>認証レポート - JSON</TITLE>
</HEAD>
<BODY>
	<H1>認証レポート - JSON</H1>

	これは、指定されたサイトに対する認証処理がどのように機能したかを詳述する専用レポートです。
	<p>
	レポートの対象とするサイトを指定する必要があります。指定しない場合、データは生成されません。
	<p>
	このレポートは、認証メソッドを正しく設定し、有効な認証情報を用いて、少なくとも1つの認証が必要なURLへのアクセスを試みた後に実行するように設計されています。<br>
セッション処理と検証は「自動検出」のままにしておくことができます。このレポートは、その効果がどの程度だったかを詳述します。

	<H3>セクション</H3>

	<table>
		<tr>
			<th align="left">セクション</th>
			<th align="left">ID</th>
		</tr>
		<tr>
			<td>概要</td>
			<td>summary</td>
		</tr>
		<tr>
			<td>自動化フレームワーク環境</td>
			<td>afenv</td>
		</tr>
		<tr>
			<td>統計</td>
			<td>statistics</td>
		</tr>
		<tr>
			<td>ドメイン</td>
			<td>domains</td>
		</tr>

		<tr>
			<td>診断</td>
			<td>diagnostics</td>
		</tr>
		<tr>
			<td>診断用自動化フレームワークプラン</td>
			<td>diagnosticsafplan</td>
		</tr>
		<tr>
			<td>診断用HTTPメッセージ</td>
			<td>diagnosticsmessages</td>
		</tr>
		<tr>
			<td>診断用ローカルストレージ</td>
			<td>diagnosticslocalstorage</td>
		</tr>
		<tr>
			<td>診断用スクリーンショット</td>
			<td>diagnosticsscreenshots</td>
		</tr>
		<tr>
			<td>診断用セッションストレージ</td>
			<td>diagnosticssessionstorage</td>
		</tr>
		<tr>
			<td>診断用Web要素</td>
			<td>diagnosticswebelements</td>
		</tr>
		<tr>
			<td>診断用ZAPログファイル</td>
			<td>diagnosticslogfile</td>
		</tr>
	</table>

	<H3>概要</H3>
	以下の概要項目が使用されます：

	<table>
		<tr>
			<th align="left">キー</th>
			<th align="left">結果</th>
			<th align="left">説明</th>
		</tr>
		<tr>
			<td>auth.summary.auth</td>
			<td>false</td>
			<td>認証に失敗しました</td>
		</tr>
		<tr>
			<td>auth.summary.auth</td>
			<td>true</td>
			<td>認証に成功したようです</td>
		</tr>
		<tr>
			<td>auth.summary.password</td>
			<td>false</td>
			<td>パスワードフィールドが特定されませんでした</td>
		</tr>
		<tr>
			<td>auth.summary.password</td>
			<td>true</td>
			<td>パスワードフィールドが特定されました</td>
		</tr>
		<tr>
			<td>auth.summary.session</td>
			<td>false</td>
			<td>セッションハンドリングが特定されませんでした</td>
		</tr>
		<tr>
			<td>auth.summary.session</td>
			<td>true</td>
			<td>セッションハンドリングが特定されました</td>
		</tr>
		<tr>
			<td>auth.summary.username</td>
			<td>false</td>
			<td>ユーザー名フィールドが特定されませんでした</td>
		</tr>
		<tr>
			<td>auth.summary.username</td>
			<td>true</td>
			<td>ユーザー名フィールドが特定されました</td>
		</tr>
		<tr>
			<td>auth.summary.verif</td>
			<td>false</td>
			<td>検証URLが特定されませんでした</td>
		</tr>
		<tr>
			<td>auth.summary.verif</td>
			<td>true</td>
			<td>検証URLが特定されました</td>
		</tr>
	</table>

	<H4>失敗の詳細</H4>
	以下の失敗の詳細項目が使用されます:

	<table>
		<tr>
			<th align="left">キー</th>
			<th align="left">説明</th>
		</tr>
		<tr>
			<td>auth.failure.overall</td>
			<td>すべての認証要素をパスしましたが、最終的に認証は失敗と判定されました。</td>
		</tr>
		<tr>
			<td>auth.failure.pass_count</td>
			<td>ブラウザログインに成功しませんでした。</td>
		</tr>
		<tr>
			<td>auth.failure.session_mgmt</td>
			<td>セッション管理の特定に失敗しました。</td>
		</tr>
		<tr>
			<td>auth.failure.logged_in</td>
			<td>ログイン状態を示す情報が見つかりませんでした。</td>
		</tr>
		<tr>
			<td>auth.failure.login_failures</td>
			<td>1回以上のログイン失敗がありました。</td>
		</tr>
		<tr>
			<td>auth.failure.no_successful_logins</td>
			<td>ブラウザログインに成功しませんでした。</td>
		</tr>
		<tr>
			<td>auth.failure.verif_ident</td>
			<td>検証URLの特定に失敗しました。</td>
		</tr>
		<tr>
			<td>auth.failure.af_plan_errors</td>
			<td>自動化フレームワークのプランにエラーがありました。</td>
		</tr>
	</table>

	<H3>自動化フレームワーク環境</H3>
	
	これは、テスト対象のコンテキストを再現するために使用できる<a href="https://www.zaproxy.org/docs/desktop/addons/automation-framework/environment/">自動化フレームワークの環境</a>です。
	<p>
	セッション管理または検証を「自動検出」に設定し、ZAPがそれらを正常に検出した場合、環境はZAPが検出した値で更新されます。 

	<H3>統計</H3>
	
	これらは、ZAPによって記録されたすべての統計情報です。<br>
それらの意味の詳細については、<a href="https://www.zaproxy.org/docs/internal-statistics/">https://www.zaproxy.org/docs/internal-statistics/</a>を参照してください。

	<H3>診断</H3>
	<a href="browser-auth.html">ブラウザベース</a>および<a href="client-script.html">クライアントスクリプト</a>認証メソッドでは、診断データを記録することができ、認証レポートに含めることで認証問題の診断に役立てることができます。
	<p>
	診断データは、<a href="auth-tester.html">認証テスターダイアログ</a>でも記録できます。
	<p>
	レポートには、記録された各認証試行に対して1つずつ、診断オブジェクトの配列が含まれます。 診断オブジェクトには、使用された認証メソッド、コンテキストとユーザーの名前、クライアントスクリプト認証の場合はスクリプト、自動化フレームワークプラン、および認証中に実行された各ステップが含まれます。
<pre>
	"diagnostics": [
		{
			"created": "0000-00-00T00:00:00.000000Z",
			"authenticationMethod": "Browser-based Authentication",
			"context": "Context Name",
			"user": "User Name",
			"script": "Script used by Client Script Authentication",
			"steps": [
				{ … }
			]
		}
	]
</pre>

	<p>
	各ステップには、少なくともURLと説明が含まれ、オプションで操作対象の入力要素 (例: 入力されるユーザー名フィールド) を含めることができます。
<pre>
	{
		"created": "0000-00-00T00:00:00.000000Z",
		"url": "http://example.com/login/",
		"description": "Auto Fill Username",
		"webElement": {
			"selector": {"type": "CSS", "value": "body > div > span > input"},
			"formIndex": 1,
			"attributeType": "text",
			"attributeId": "email",
			"attributeName": "email",
			"attributeValue": "",
			"text": "",
			"displayed": true,
			"enabled": true
		}
		…
	}
</pre>
	レポートで有効化された追加の診断セクションに応じて、各ステップにはさらに多くのデータを含めることができます。
	<p>selector は、<code>CSS</code>または<code>XPATH</code>のタイプで、value には対応するセレクタが含まれます。


	<H4>診断用自動化フレームワークプラン</H4>
	このセクションが有効化されている場合、診断オブジェクトにはオプションで認証中に使用された自動化フレームワークプランを含めることができます。
<pre>
	"diagnostics": [
		{
			…
			"afPlan": "Content Automation Framework Plan",
			…
		}
	]
</pre>

	<H4>診断用HTTPメッセージ</H4>
	このセクションが有効化されている場合、ステップにはオプションでそのステップ中に送信されたHTTPメッセージを含めることができます。 各メッセージには、リクエスト/レスポンスのヘッダーとボディが含まれます。
<pre>
	"messages": [
		{
			"created": "0000-00-00T00:00:00.000000Z",
			"requestHeader": "GET http://example.com/login HTTP/1.1",
			"requestBody": "",
			"responseHeader": "HTTP/1.1 200 OK",
			"responseBody": ""
		}
	]
</pre>

	<H4>診断用ローカルストレージ</H4>
	このセクションが有効化されている場合、ステップにはオプションでブラウザのローカルストレージを含めることができます。
<pre>
	"localStorage": [
		{
			"created": "0000-00-00T00:00:00.000000Z",
			"key": "key",
			"value": "value"
		}
	]
</pre>

	<H4>診断用スクリーンショット</H4>
	このセクションが有効化されている場合、ステップにはオプションでBase64エンコードされた画像データを含むページのスクリーンショットを含めることができます。
<pre>
	"screenshot": "…"
</pre>

	<H4>診断用セッションストレージ</H4>
	このセクションが有効化されている場合、ステップにはオプションでブラウザのセッションストレージを含めることができます。
<pre>
	"sessionStorage": [
		{
			"created": "0000-00-00T00:00:00.000000Z",
			"key": "key",
			"value": "value"
		}
	]
</pre>

	<H4>診断用Web要素</H4>
	このセクションが有効化されている場合、ステップにはオプションでページ内に存在するすべての入力要素を含めることができます。
<pre>
	"webElements": [
		{
			"selector": {"type": "XPATH", "value": "\/html\/body\/div\/input[4]"},
			"formIndex": 0,
			"attributeType": "text",
			"attributeId": "id",
			"attributeName": "name",
			"attributeValue": "",
			"text": "",
			"displayed": true,
			"enabled": true
		}
	]
</pre>

	<H4>診断用ZAPログファイル</H4>
	このセクションが有効化されている場合、ログファイルの内容を含むトップレベルプロパティがレポートに追加されます。
<pre>
	"logFile": "Log file content..."
</pre>

	<H3>サンプル</H3>
<pre>
{
	"@programName": "ZAP",
	"@version": "Dev Build",
	"@generated": "Mon, 10 Feb 2025 17:27:23",
	"site":  "http:\/\/localhost:9091"
	,"summaryItems": [
		{
			"description": "Authentication appeared to work",
			"passed": true,
			"key": "auth.summary.auth"
		},
		{
			"description": "Username field identified",
			"passed": true,
			"key": "auth.summary.username"
		},
		{
			"description": "Password field identified",
			"passed": true,
			"key": "auth.summary.password"
		},
		{
			"description": "Session Handling identified",
			"passed": true,
			"key": "auth.summary.session"
		},
		{
			"description": "Verification URL identified",
			"passed": true,
			"key": "auth.summary.verif"
		}
	]
	,"failureReasons": [
		{
			"key": "auth.failure.no_successful_logins",
			"description": "No successful logins."
		}
	]
	,"afEnv": "env:\n  contexts:\n  - name: simple-json-bearer-cookie\n    urls:\n    - http:\/\/localhost:9091\/auth\/simple-json-bearer-cookie\n    includePaths:\n    - http:\/\/localhost:9091\/auth\/simple-json-bearer-cookie.*\n    authentication:\n      method: browser\n      parameters:\n        loginPageUrl: http:\/\/localhost:9091\/auth\/simple-json-bearer-cookie\/\n        loginPageWait: 5\n        browserId: firefox-headless\n        steps: []\n      verification:\n        method: poll\n        loggedInRegex: \\Q 200 OK\\E\n        loggedOutRegex: \\Q 403 Forbidden\\E\n        pollFrequency: 0\n        pollUnits: seconds\n        pollUrl: http:\/\/localhost:9091\/auth\/simple-json-bearer-cookie\/user\n        pollPostData: \"\"\n    sessionManagement:\n      method: headers\n      parameters:\n        Authorization: \"Bearer {%json:accesstoken%}\"\n        Cookie: \"token={%json:accesstoken%}\"\n    technology: {}\n    structure: {}\n    users:\n    - name: test\n      credentials:\n        password: password123\n        username: test@test.com\n  parameters: {}\n"
	,"statistics": [
		{
			"key": "stats.auth.browser.foundfields",
			"scope": "site",
			"site:" "https://www.example.org",
			"value": 1
		},
		{
			"key": "stats.auth.browser.passed",
			"scope": "site",
			"site:" "https://www.example.org",
			"value": 1
		},
		{
			"key": "stats.auth.configure.session.header",
			"scope": "global",
			"value": 1
		},
		{
			"key": "stats.auth.configure.verification",
			"scope": "global",
			"value": 1
		},
		{
			"key": "stats.auth.detect.auth.json",
			"scope": "global",
			"value": 5
		},
		{
			"key": "stats.auth.detect.session.accesstoken",
			"scope": "global",
			"value": 5
		},
		{
			"key": "stats.auth.detect.session.authorization",
			"scope": "global",
			"value": 1
		},
		{
			"key": "stats.auth.detect.session.token",
			"scope": "global",
			"value": 7
		},
		{
			"key": "stats.auth.session.set.header",
			"scope": "global",
			"value": 20
		},
		{
			"key": "stats.auth.sessiontoken.accesstoken",
			"scope": "site",
			"site:" "https://www.example.org",
			"value": 9
		},
		{
			"key": "stats.auth.sessiontoken.token",
			"scope": "site",
			"site:" "https://www.example.org",
			"value": 6
		},
		{
			"key": "stats.auth.sessiontokens.max",
			"scope": "global",
			"value": 2
		},
		{
			"key": "stats.auth.state.loggedin",
			"scope": "site",
			"site:" "https://www.example.org",
			"value": 2
		},
		{
			"key": "stats.auth.success",
			"scope": "site",
			"site:" "https://www.example.org",
			"value": 1
		}
	]
	,"domains": [
		"https://www.example.org",
		"https://api.example.org"
	]
}
</pre>
</BODY>
</HTML>

