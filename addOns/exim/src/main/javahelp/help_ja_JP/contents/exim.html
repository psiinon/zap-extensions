<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<TITLE>
インポート/エクスポート
</TITLE>
</HEAD>
<BODY>

<H1>インポート/エクスポート</H1>

このアドオンを使用すると、さまざまな形式でZAPデータをインポートおよびエクスポートできます。
<p>
<a href="automation.html">自動化フレームワーク</a>に対応しています。

<H2>メニュー</H2>

<H3>URLをコピー</H3>
URLをシステムクリップボードにコピーするためのコンテキストメニュー項目。

<H3>選択したエントリをHAR (HTTPアーカイブファイル) として保存</H3>
選択したHTTPメッセージをHAR形式で保存するためのコンテキストメニュー項目。

<H3>メッセージをRaw形式で保存</H3>
HTTPメッセージのコンテンツをバイナリとして保存するためのコンテキストメニューを提供します。
（ファイルはおそらく単純なエディタで開くことができますが、null 文字や不正なバイトが含まれている可能性があります。）

<H3>XMLメッセージを保存</H3>
HTTPメッセージのコンテンツをXMLとして保存するためのコンテキストメニューを提供します。

<H3>HAR (HTTPアーカイブファイル) をインポート</H3>
「インポート」メニューから利用できる、HTTPアーカイブ (HAR) からメッセージをインポートするオプション。 

<strong>注</strong>: HAR (HTTPアーカイブファイル) のインポート時に、以下の変更が行われる可能性があります：
<ul>
  <li>HTTPバージョンの欠落 - メッセージに httpVersion 属性がない場合、"HTTP/1.1" に設定されます。</li>
  <li>HTTPバージョン3 - メッセージの httpVersion 属性が "h3"、"http/3"、"http/3.0" に設定されている場合、"HTTP/2" に設定されます。</li>
  <li>ヘッダー内のキャリッジリターン (CR) またはラインフィード (LF) - メッセージにCRまたはLFを含むヘッダーが含まれている場合、CRLFは削除されます。</li>
</ul>

<H3>ログファイルをインポート</H3>
ModSecurity ログファイルと、以前にZAPからエクスポートされたファイルをインポートできます。

<H3>URLをインポート</H3>
「インポート」メニュー (「URLを含むファイルをインポート」) から、URLのファイルをインポートするオプションを利用できます。 ファイルは、1行に1つのURLを含むプレーンテキストである必要があります。
空行および # で始まる行は無視されます。

<H3>ツール / サイトツリーの剪定...</H3>
<a href="sitestreeformat.html">サイトツリー形式</a>のファイルを使用して、サイトツリーからURLを剪定できます。

<H2>エクスポート</H2>
このアドオンは、トップレベルの「エクスポート」メニューも追加し、以下の機能を提供します。

<H3>メッセージを保存…</H3>
リクエストおよびレスポンスをテキストファイルに保存する機能です。 <br/>
履歴タブで保存するメッセージを選択します (複数選択を含む)。

<H3>レスポンスを保存...</H3>
特定のレスポンスをファイルに保存できます。 <br/>
履歴タブで関連するメッセージを選択します。テキストレスポンスだけでなく、バイナリレスポンス (画像など) も保存できることに注意してください。

<H3>サイトツリーを保存…</H3>
<a href="sitestreeformat.html">サイトツリー形式</a>でサイトツリーを保存できます。

<H3>すべてのURLを保存…</H3>
アクセスされたすべてのURLをテキストファイルまたはHTMLファイルに保存できます。 <br/>
これは特に、同じシステム上の異なるロールまたは権限を持つユーザーが利用できるURLを比較するために使用できます。
（また、アクセス制御テストアドオンの活用も検討してください。）
この機能は、サイトツリーパネルの右クリックコンテキストメニューからも利用できます。

<H3>URLを保存…</H3>
選択されたノードに含まれるサイトツリー内のすべてのURLがエクスポートされます。 この機能は、サイトツリーパネルのサイトまたはコンテキストノードで右クリックメニューからも利用できます。

<H2>ZAP API</H2>
このアドオンは、機能のプログラムによる使用を容易にするために、さまざまなZAP APIエンドポイントも公開しています。

<H3>アクション</H3>
<ul>
  <li><code>exportSitesTree (filePath* )</code> サイトツリーをサイトツリーYAML形式でエクスポートします。</li>
  <li><code>importHar (filePath* )</code> HARファイルをインポートします。</li>
  <li><code>importModsec2Logs (filePath* )</code> 指定されたファイルシステムパスのファイルからModSecurity2ログをインポートします。</li>
  <li><code>importUrls (filePath* )</code> 指定されたファイルシステムパスのファイルからURL (1行に1つ) をインポートします。</li>
  <li><code>importZapLogs (filePath* )</code> 指定されたファイルシステムパスのファイルから、以前にエクスポートされたZAPメッセージをインポートします。</li>
  <li><code>pruneSitesTree (filePath* )</code> サイトツリーYAML形式のファイルに基づいてサイトツリーを剪定します。</li>
</ul>

<H3>その他</H3>
  <li><code>exportHar (baseurl start count )</code> ZAPを経由/によって送信されたHTTPメッセージをHAR形式で取得します。オプションでURLによるフィルタリングや、'start' 位置とメッセージの 'count' によるページネーションが可能です。</li>
  <li><code>exportHarById (ids* )</code> 指定されたIDを持つHTTPメッセージをHAR形式で取得します。</li>
  <li><code>sendHarRequest (request* followRedirects )</code>  最初のHARリクエストエントリを送信します。オプションでリダイレクトをフォローします。 送信されたリクエストと受信したレスポンス、およびフォローされたリダイレクト (存在する場合) をHAR形式で返します。 リクエストの送信時 (およびリダイレクトのフォロー時) にはモードが適用されます。スコープ外の場合、「セーフ」モードまたは「プロテクト」モードではカスタムの手動リクエストは許可されません。</li>
</ul>

</BODY>
</HTML>
